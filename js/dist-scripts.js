let pokemonRepository = function () { let t = [], e = "https://pokeapi.co/api/v2/pokemon/?limit=20", n = document.querySelector("#modal-container"); function o(e) { e.name && e.detailsUrl ? t.push(e) : console.log("Pokemon is not correct") } function i(t) { a(t).then(function () { !function (t) { let e = $(".modal-body"), n = $(".modal-title"); n.empty(), e.empty(); let o = $(`<h5 class="text-uppercase">${t.name}</h5>`), i = $(`<img class="rounded mx-auto d-block w-50 p-3" src='${t.imageUrl}' alt="Picture of the Pokemon ${t.name}">`), l = $(`<p class="ml-4 mt-3 mb-0">Height: ${t.height}</p>'`); n.append(o), e.append(i), e.append(l) }(t) }) } function l() { n.classList.remove("is-visible") } function a(t) { let e = t.detailsUrl; return fetch(e).then(function (t) { return t.json() }).then(function (e) { t.imageUrl = e.sprites.front_default, t.height = e.height, t.types = e.types }).catch(function (t) { console.error(t) }) } return window.addEventListener("keydown", t => { "Escape" === t.key && n.classList.contains("is-visible") && l() }), n.addEventListener("click", t => { t.target === n && l() }), { getAll: function () { return t }, add: o, addListItem: function (t) { let e = document.querySelector(".pokemon-list"), n = document.createElement("li"); n.classList.add("col-6", "mx-auto"); let o = document.createElement("button"); o.innerText = t.name, o.classList.add("btn", "button-class", "btn-outline-primary", "btn-lg", "btn-block", "text-capitalize"), n.appendChild(o), o.setAttribute("data-toggle", "modal"), o.setAttribute("data-target", ".modal"), e.appendChild(n), function (t, e) { t.addEventListener("click", function () { i(e) }) }(o, t) }, loadList: function () { return fetch(e).then(function (t) { return t.json() }).then(function (t) { t.results.forEach(function (t) { let e = { name: t.name, detailsUrl: t.url }; o(e), console.log(e) }) }).catch(function (t) { console.error(t) }) }, loadDetails: a, showDetails: i } }(); pokemonRepository.loadList().then(function () { pokemonRepository.getAll().forEach(function (t) { pokemonRepository.addListItem(t) }) });